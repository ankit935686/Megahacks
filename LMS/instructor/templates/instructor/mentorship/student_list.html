{% extends 'base.html' %}

{% block content %}
<div class="student-list-container">
    <h2>Available Students</h2>
    
    <div class="students-grid">
        {% for student in students %}
            <div class="student-card">
                {% if student.studentprofile.profile_picture %}
                    <img src="{{ student.studentprofile.profile_picture.url }}" alt="{{ student.username }}'s profile picture">
                {% else %}
                    <div class="default-avatar">{{ student.username|first|upper }}</div>
                {% endif %}
                
                <div class="student-info">
                    <h3>{{ student.get_full_name|default:student.username }}</h3>
                    <p class="skills">
                        {% for skill in student.studentprofile.skills.all %}
                            <span class="skill-tag">{{ skill }}</span>
                        {% endfor %}
                    </p>
                    <p class="bio">{{ student.studentprofile.bio|truncatechars:100 }}</p>
                </div>
                
                <div class="action-buttons">
                    {% if not student.friend_request_status %}
                        <form method="post" action="{% url 'instructor:send_friend_request' student.id %}">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-primary">Send Request</button>
                        </form>
                    {% elif student.friend_request_status == 'PENDING' %}
                        <span class="status-badge pending">Request Pending</span>
                    {% elif student.friend_request_status == 'ACCEPTED' %}
                        <span class="status-badge accepted">Connected</span>
                    {% endif %}
                </div>
            </div>
        {% empty %}
            <p>No students available at the moment.</p>
        {% endfor %}
    </div>
</div>

<style>
.student-list-container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.students-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.student-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.student-card img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
}

.default-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: #007bff;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
}

.student-info {
    flex-grow: 1;
}

.skill-tag {
    background: #e9ecef;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.9em;
    margin: 2px;
    display: inline-block;
}

.status-badge {
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 0.9em;
    text-align: center;
}

.status-badge.pending {
    background: #ffd700;
    color: #000;
}

.status-badge.accepted {
    background: #28a745;
    color: white;
}

.btn {
    width: 100%;
    padding: 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
}

.btn-primary {
    background: #007bff;
    color: white;
}

.btn-primary:hover {
    background: #0056b3;
}
</style>
{% endblock %} 